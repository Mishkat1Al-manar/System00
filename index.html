<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>حصر استئذانات الطلاب</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
body {font-family: 'Cairo', sans-serif; background:#f0f4f8; margin:0; padding:0;}
header {display:flex; align-items:center; padding:15px 30px; background:linear-gradient(to left,#0d47a1,#1976d2); color:#fff;}
header img {height:65px; margin-left:20px;}
.container {padding:30px 20px; max-width:1200px; margin:auto;}
.form-box {background:#fff; padding:25px; border-radius:12px; display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:20px;}
.form-box label {font-weight:bold; margin-bottom:5px; display:block;}
.form-box input, .form-box select {width:100%; padding:10px; border:1px solid #ccc; border-radius:8px; font-size:15px;}
.form-box button {background:linear-gradient(to right,#1565c0,#1e88e5); color:#fff; border:none; cursor:pointer; font-weight:bold; padding:12px 20px; border-radius:8px; font-size:15px;}
.form-box button:hover {background:#0d47a1;}
.actions {display:flex; justify-content:center; gap:15px; margin-bottom:25px;}
.actions button {padding:12px 25px; border:none; border-radius:8px; font-weight:bold; cursor:pointer; background:#1976d2; color:white; font-size:16px; transition:background 0.3s;}
.actions button:hover {background:#0d47a1;}
table {width:100%; border-collapse:collapse; background:#fff; border-radius:12px; overflow:hidden; margin-top:20px;}
th,td {padding:14px 10px; text-align:center; border-bottom:1px solid #eee; font-size:15px;}
th {background:#1565c0; color:#fff;}
footer {text-align:center; padding:18px; margin-top:30px; background:#e0e0e0; font-weight:bold;}
@media print {header,.form-box,.actions,footer {display:none;} table {box-shadow:none;}}
</style>
</head>
<body>

<header>
<img src="school.logo.png" alt="شعار المدرسة">
<h1>حصر استئذانات الطلاب</h1>
</header>

<div class="container">

<div class="form-box">
<div>
<label for="name">🧑‍🎓 اسم الطالب:</label>
<select id="name" required>
<option value="">اختر الطالب</option>
<option value="محمد أحمد">محمد أحمد</option>
<option value="سعود خالد">سعود خالد</option>
<option value="عبدالله فهد">عبدالله فهد</option>
<option value="راكان ناصر">راكان ناصر</option>
</select>
</div>
<div>
<label for="class">🏫 الصف:</label>
<select id="class" required>
<option value="">اختر الصف</option>
<optgroup label="أول ثانوي">
<option>أول ثانوي 1</option>
<option>أول ثانوي 2</option>
<option>أول ثانوي 3</option>
<option>أول ثانوي 4</option>
</optgroup>
<optgroup label="ثاني ثانوي">
<option>ثاني ثانوي 1</option>
<option>ثاني ثانوي 2</option>
<option>ثاني ثانوي 3</option>
<option>ثاني ثانوي 4</option>
</optgroup>
<optgroup label="ثالث ثانوي">
<option>ثالث ثانوي 1</option>
<option>ثالث ثانوي 2</option>
<option>ثالث ثانوي 3</option>
<option>ثالث ثانوي 4</option>
</optgroup>
</select>
</div>
<div>
<label for="day">🗓️ اليوم:</label>
<select id="day" required>
<option value="">اختر اليوم</option>
<option>الأحد</option>
<option>الاثنين</option>
<option>الثلاثاء</option>
<option>الأربعاء</option>
<option>الخميس</option>
</select>
</div>
<div>
<label for="date">📅 التاريخ:</label>
<input type="text" id="date" placeholder="مثال: 29-09-2025">
</div>
<div>
<label for="time">⏰ الوقت:</label>
<input type="text" id="time" placeholder="مثال: 10:30 ص">
</div>
<div>
<label for="reason">📝 السبب:</label>
<input type="text" id="reason">
</div>
<div>
<button id="saveBtn">حفظ الاستئذان</button>
</div>
</div>

<div class="actions">
<button onclick="window.print()">طباعة القائمة</button>
</div>

<table id="recordsTable">
<thead>
<tr>
<th>اسم الطالب</th>
<th>الصف</th>
<th>اليوم</th>
<th>التاريخ</th>
<th>الوقت</th>
<th>السبب</th>
</tr>
</thead>
<tbody></tbody>
</table>

</div>

<footer>
جميع الحقوق محفوظة لـ قسم التقنية الرقمية
</footer>

<script>
const GOOGLE_SCRIPT_URL = "ضع رابط Web App هنا";

document.getElementById("saveBtn").addEventListener("click", function(e){
e.preventDefault(); // مهم عشان الزر ما يعيد تحميل الصفحة

const name = document.getElementById("name").value.trim();
const studentClass = document.getElementById("class").value.trim();
const day = document.getElementById("day").value.trim();
const date = document.getElementById("date").value.trim();
const time = document.getElementById("time").value.trim();
const reason = document.getElementById("reason").value.trim();

if(!name || !studentClass || !day || !date || !time){
  alert("يرجى تعبئة جميع الحقول المطلوبة.");
  return;
}

const record = {name, class: studentClass, day, date, time, reason};

// إرسال البيانات للشيت
fetch(GOOGLE_SCRIPT_URL,{
  method:"POST",
  body: JSON.stringify(record)
})
.then(res=>res.text())
.then(msg=>{
  alert(msg);
  addRow(record);
  clearFields();
})
.catch(err=>alert("حدث خطأ في حفظ البيانات: "+err));

});

function addRow(record){
const tableBody=document.querySelector("#recordsTable tbody");
const row=document.createElement("tr");
row.innerHTML=`
<td>${record.name}</td>
<td>${record.class}</td>
<td>${record.day}</td>
<td>${record.date}</td>
<td>${record.time}</td>
<td>${record.reason}</td>`;
tableBody.appendChild(row);
}

function clearFields(){
document.getElementById("name").value="";
document.getElementById("class").value="";
document.getElementById("day").value="";
document.getElementById("date").value="";
document.getElementById("time").value="";
document.getElementById("reason").value="";
}
</script>

</body>
</html>

